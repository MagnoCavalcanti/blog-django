{% extends 'base.html' %}
{% load static %}

{% block title %}{{ post.title }} - Meu Blog{% endblock %}
{% block extra_css %} 
<link rel="stylesheet" href="{% static '/style/post.css' %}">
{% endblock %}
{% block conteudo %}
<div class="container" style="padding-top:18px;">
	<article class="post">
		<div class="post-header">
			<div class="post-user-info">
				<span class="post-user-name">{{ post.author.username }}</span>
				<span class="post-user-handle">@{{ post.author.username|lower }}</span>
				<span class="post-time">· {{ post.created_by|timesince }}</span>
                <span> 
                    <button class="btn-primary" id="delete-post">
                        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="15" height="15" viewBox="0 0 30 30">
                        <path fill="currentColor" d="M 14.984375 2.4863281 A 1.0001 1.0001 0 0 0 14 3.5 L 14 4 L 8.5 4 A 1.0001 1.0001 0 0 0 7.4863281 5 L 6 5 A 1.0001 1.0001 0 1 0 6 7 L 24 7 A 1.0001 1.0001 0 1 0 24 5 L 22.513672 5 A 1.0001 1.0001 0 0 0 21.5 4 L 16 4 L 16 3.5 A 1.0001 1.0001 0 0 0 14.984375 2.4863281 z M 6 9 L 7.7929688 24.234375 C 7.9109687 25.241375 8.7633438 26 9.7773438 26 L 20.222656 26 C 21.236656 26 22.088031 25.241375 22.207031 24.234375 L 24 9 L 6 9 z"></path>
                        </svg>
                    </button>
                </span>

				<div class="post-title">
					<h2>{{ post.title }}</h2>
				</div>

				<div class="post-content" style="margin-top:10px; color:#dde7eb;">
					<p>{{ post.content }}</p>
				</div>

				<div style="margin-top:10px; display:flex; gap:8px; align-items:center;">
					<svg viewBox="0 0 24 24" width="18" height="18">
					<path fill="currentColor" d="M12 21.638h-.014C9.403 21.59 1.95 14.856 1.95 8.478c0-3.064 2.525-5.754 5.403-5.754 2.29 0 3.83 1.58 4.646 2.73.814-1.148 2.354-2.73 4.645-2.73 2.88 0 5.404 2.69 5.404 5.755 0 6.376-7.454 13.11-10.037 13.157H12zM7.354 4.225c-2.08 0-3.903 1.988-3.903 4.255 0 5.74 7.034 11.596 8.55 11.658 1.518-.062 8.55-5.917 8.55-11.658 0-2.267-1.823-4.255-3.903-4.255-2.528 0-3.94 2.936-3.952 2.965-.23.562-1.156.562-1.387 0-.014-.03-1.425-2.965-3.954-2.965z"></path>
					</svg>
					<span class="like-count">{{ post.likes }}</span>
					
				</div>
			</div>
		</div>
	</article>

	<section class="comments" style="margin-top:18px;">
		<h3>Comentários ({{ comments.count }})</h3>

		{% if comments %}
			<ul style="list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:10px;">
				{% for comment in comments %}
					<li style="background:#0f1418; padding:10px; border-radius:8px;">
						<strong>{{ comment.author.username }}</strong> <span style="color:#8899a6;">· {{ comment.created_by|timesince }}</span>
						<div style="margin-top:6px; color:#dde7eb;">{{ comment.content }}</div>
					</li>
				{% endfor %}
			</ul>
		{% else %}
			<p>Nenhum comentário ainda. Seja o primeiro!</p>
		{% endif %}

		<form method="post" action="" style="margin-top:12px;" class="new-comment-form">
			{% csrf_token %}
			<textarea name="content" placeholder="Adicione um comentário..." required style="width:100%; min-height:80px; padding:10px; border-radius:8px; background:#071014; color:#e6eef2; border:1px solid rgba(255,255,255,0.04);"></textarea>
			<div style="display:flex; gap:8px; justify-content:flex-end; margin-top:8px;">
				<a href="{% url 'feed' %}" class="btn-ghost" style="text-decoration:none; display:inline-flex; align-items:center;">Voltar</a>
				<button type="submit" class="btn-primary">Comentar</button>
			</div>
		</form>
	</section>
</div>

{% endblock %}

{% block scripts %}
    <script src="{% static 'js/post.js' %}"></script>
{% endblock %}